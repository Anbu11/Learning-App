CREATE TABLE IF NOT EXISTS USER(USERID int NOT NULL AUTO_INCREMENT PRIMARY KEY, EMAILID varchar(50) NOT NULL UNIQUE, PASSWORD varchar(20) DEFAULT NULL, MOBILE varchar(15) DEFAULT NULL, FNAME varchar(15) NOT NULL, LNAME varchar(15) DEFAULT NULL, ROLE varchar(5), ACTIVE BOOL);
CREATE TABLE IF NOT EXISTS ADDRESS(USERID int, STREET varchar(30), CITY varchar(30), PIN varchar(10), CONSTRAINT FOREIGN KEY(USERID) REFERENCES USER(USERID));
CREATE TABLE IF NOT EXISTS MAINCATEGORY(CID int NOT NULL AUTO_INCREMENT PRIMARY KEY, CATEGORY varchar(25) NOT NULL);
CREATE TABLE IF NOT EXISTS SUBCATEGORY(CID int, SCID int NOT NULL AUTO_INCREMENT PRIMARY KEY, TYPE varchar(20) NOT NULL, BRANDNAME varchar(50) NOT NULL, COSTPERKG int NOT NULL, OFFER int DEFAULT NULL, IMAGE BLOB DEFAULT NULL, CONSTRAINT FOREIGN KEY(CID) REFERENCES MAINCATEGORY(CID));
CREATE TABLE IF NOT EXISTS CART(USERID int, SCID int, QUANTITY int NOT NULL, CONSTRAINT FOREIGN KEY(USERID) REFERENCES USER(USERID), CONSTRAINT FOREIGN KEY(SCID) REFERENCES SUBCATEGORY(SCID));
CREATE TABLE IF NOT EXISTS ORDERS(USERID int, SCID int, ORDERID int NOT NULL AUTO_INCREMENT PRIMARY KEY, QUANTITY int NOT NULL, STATUS varchar(15) NOT NULL, ORDERDATE DATETIME DEFAULT CURRENT_TIMESTAMP,  CONSTRAINT FOREIGN KEY(USERID) REFERENCES USER(USERID), CONSTRAINT FOREIGN KEY(SCID) REFERENCES SUBCATEGORY(SCID));
CREATE TABLE IF NOT EXISTS INVOICE(ORDERID int, DOCUMENT BLOB, CONSTRAINT FOREIGN KEY(ORDERID) REFERENCES ORDERS(ORDERID));
CREATE TABLE IF NOT EXISTS VERIFICATION(USERID int, CODE varchar(10) NOT NULL, TIMECREATED DATETIME DEFAULT CURRENT_TIMESTAMP, CONSTRAINT FOREIGN KEY(USERID) REFERENCES USER(USERID));